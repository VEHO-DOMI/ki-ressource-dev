<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dichte - Schwimmen und Sinken</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 12px;
            color: #fff;
        }
        .header {
            text-align: center;
            margin-bottom: 12px;
        }
        .header h1 {
            font-size: 1.4em;
            color: #4fc3f7;
            margin-bottom: 4px;
        }
        .header p {
            color: #90a4ae;
            font-size: 0.8em;
        }
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 12px;
            height: calc(100vh - 80px);
            min-height: 500px;
        }
        @media (max-width: 900px) {
            .main-layout {
                grid-template-columns: 1fr;
                height: auto;
            }
        }
        .canvas-container {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        canvas {
            display: block;
            flex: 1;
            background: linear-gradient(180deg, #87CEEB 0%, #1E90FF 50%, #0d1b2a 50%, #1b263b 100%);
            border-radius: 8px;
            border: 2px solid #4fc3f7;
        }
        .control-panel {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 12px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .control-section {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 8px;
        }
        .control-section h3 {
            color: #4fc3f7;
            font-size: 0.85em;
            margin-bottom: 6px;
        }
        .object-btn {
            padding: 6px 10px;
            font-size: 0.75em;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
            width: 100%;
            margin-bottom: 4px;
        }
        .object-btn:last-child { margin-bottom: 0; }
        .object-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }
        .object-btn.wood { background: linear-gradient(135deg, #8B4513, #D2691E); color: white; }
        .object-btn.ice { background: linear-gradient(135deg, #E0FFFF, #B0E0E6); color: #333; }
        .object-btn.iron { background: linear-gradient(135deg, #708090, #2F4F4F); color: white; }
        .object-btn.oil { background: linear-gradient(135deg, #FFD700, #FFA500); color: #333; }
        .object-btn.stone { background: linear-gradient(135deg, #696969, #A9A9A9); color: white; }
        .object-btn.cork { background: linear-gradient(135deg, #DEB887, #F5DEB3); color: #333; }
        .object-btn.reset { background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; }
        .slider-section {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .slider-section label {
            font-size: 0.8em;
            color: #90a4ae;
        }
        input[type="range"] {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            background: linear-gradient(90deg, #4fc3f7, #e91e63);
            border-radius: 3px;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
        }
        input[type="range"]::-moz-range-thumb {
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        .density-display {
            font-size: 0.8em;
            font-weight: bold;
            color: #4fc3f7;
        }
        .legend {
            font-size: 0.7em;
            color: #90a4ae;
            line-height: 1.4;
        }
        .formula {
            background: rgba(0,0,0,0.3);
            padding: 6px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-size: 0.75em;
            color: #4fc3f7;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚öóÔ∏è Dichte ‚Äì Schwimmen und Sinken</h1>
        <p>3. Klasse Chemie</p>
    </div>

    <div class="main-layout">
        <div class="canvas-container">
            <canvas id="densityCanvas" width="800" height="450"></canvas>
        </div>

        <div class="control-panel">
            <div class="control-section">
                <h3>üß¨ Objekte</h3>
                <button class="object-btn wood" onclick="addObject('wood')">ü™µ Holz</button>
                <button class="object-btn ice" onclick="addObject('ice')">üßä Eis</button>
                <button class="object-btn cork" onclick="addObject('cork')">üçæ Kork</button>
                <button class="object-btn oil" onclick="addObject('oil')">üõ¢Ô∏è √ñl</button>
                <button class="object-btn stone" onclick="addObject('stone')">ü™® Stein</button>
                <button class="object-btn iron" onclick="addObject('iron')">‚öôÔ∏è Eisen</button>
                <button class="object-btn reset" onclick="resetSimulation()">üîÑ Reset</button>
            </div>

            <div class="control-section slider-section">
                <h3>üß™ Fl√ºssigkeit</h3>
                <label for="liquidDensity">Dichte anpassen:</label>
                <input type="range" id="liquidDensity" min="0.8" max="1.5" step="0.01" value="1.0">
                <span class="density-display" id="densityDisplay">œÅ = 1.00 g/cm¬≥</span>
            </div>

            <div class="control-section">
                <h3>üìö Dichtetabelle</h3>
                <div class="legend">
                    <div>ü™µ Holz: 0.6</div>
                    <div>üßä Eis: 0.92</div>
                    <div>üçæ Kork: 0.24</div>
                    <div>üõ¢Ô∏è √ñl: 0.85</div>
                    <div>ü™® Stein: 2.5</div>
                    <div>‚öôÔ∏è Eisen: 7.87</div>
                </div>
            </div>

            <div class="control-section">
                <div class="formula">œÅ = m / V</div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('densityCanvas');
        const ctx = canvas.getContext('2d');
        const liquidDensitySlider = document.getElementById('liquidDensity');
        const densityDisplay = document.getElementById('densityDisplay');

        let liquidDensity = 1.0;
        const waterLevel = canvas.height * 0.5;
        let objects = [];

        const materials = {
            wood: { density: 0.6, color: '#8B4513', emoji: 'ü™µ', name: 'Holz' },
            ice: { density: 0.92, color: '#B0E0E6', emoji: 'üßä', name: 'Eis' },
            cork: { density: 0.24, color: '#DEB887', emoji: 'üçæ', name: 'Kork' },
            oil: { density: 0.85, color: '#FFD700', emoji: 'üõ¢Ô∏è', name: '√ñl' },
            stone: { density: 2.5, color: '#696969', emoji: 'ü™®', name: 'Stein' },
            iron: { density: 7.87, color: '#2F4F4F', emoji: '‚öôÔ∏è', name: 'Eisen' }
        };

        class FloatingObject {
            constructor(type, x) {
                this.type = type;
                this.x = x;
                this.y = 50;
                this.vy = 0;
                this.size = 40;
                this.material = materials[type];
            }

            getTargetY() {
                const ratio = this.material.density / liquidDensity;
                if (ratio >= 1) {
                    return canvas.height - this.size - 10;
                } else {
                    const submergedFraction = ratio;
                    return waterLevel - this.size * (1 - submergedFraction);
                }
            }

            update() {
                const targetY = this.getTargetY();
                const dy = targetY - this.y;
                this.vy += dy * 0.02;
                this.vy *= 0.92;
                this.y += this.vy;

                // Horizontal drift
                this.x += Math.sin(Date.now() / 1000 + this.x) * 0.3;
                if (this.x < this.size) this.x = this.size;
                if (this.x > canvas.width - this.size) this.x = canvas.width - this.size;
            }

            draw() {
                ctx.save();

                // Shadow
                ctx.fillStyle = 'rgba(0,0,0,0.3)';
                ctx.beginPath();
                ctx.ellipse(this.x + 3, this.y + this.size + 3, this.size/2, this.size/4, 0, 0, Math.PI * 2);
                ctx.fill();

                // Object
                const gradient = ctx.createRadialGradient(
                    this.x - this.size/4, this.y - this.size/4, 0,
                    this.x, this.y, this.size
                );
                gradient.addColorStop(0, this.lightenColor(this.material.color, 40));
                gradient.addColorStop(1, this.material.color);

                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(this.x, this.y + this.size/2, this.size/2, 0, Math.PI * 2);
                ctx.fill();

                // Border
                ctx.strokeStyle = 'rgba(255,255,255,0.3)';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Label
                ctx.fillStyle = 'white';
                ctx.font = 'bold 12px Segoe UI';
                ctx.textAlign = 'center';
                ctx.fillText(this.material.name, this.x, this.y + this.size + 20);
                ctx.font = '10px Segoe UI';
                ctx.fillStyle = '#90a4ae';
                ctx.fillText(`œÅ = ${this.material.density} g/cm¬≥`, this.x, this.y + this.size + 35);

                ctx.restore();
            }

            lightenColor(color, percent) {
                const num = parseInt(color.replace('#', ''), 16);
                const amt = Math.round(2.55 * percent);
                const R = (num >> 16) + amt;
                const G = (num >> 8 & 0x00FF) + amt;
                const B = (num & 0x0000FF) + amt;
                return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                    (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                    (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
            }
        }

        function addObject(type) {
            const x = 100 + Math.random() * (canvas.width - 200);
            objects.push(new FloatingObject(type, x));
            if (objects.length > 12) objects.shift();
        }

        function resetSimulation() {
            objects = [];
        }

        function drawBackground() {
            // Sky
            const skyGradient = ctx.createLinearGradient(0, 0, 0, waterLevel);
            skyGradient.addColorStop(0, '#87CEEB');
            skyGradient.addColorStop(1, '#E0F7FA');
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, canvas.width, waterLevel);

            // Water
            const waterGradient = ctx.createLinearGradient(0, waterLevel, 0, canvas.height);
            const hue = liquidDensity > 1.2 ? 200 : liquidDensity > 1.0 ? 210 : 190;
            waterGradient.addColorStop(0, `hsl(${hue}, 70%, 50%)`);
            waterGradient.addColorStop(1, `hsl(${hue}, 80%, 20%)`);
            ctx.fillStyle = waterGradient;
            ctx.fillRect(0, waterLevel, canvas.width, canvas.height - waterLevel);

            // Water surface waves
            ctx.strokeStyle = 'rgba(255,255,255,0.4)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let x = 0; x < canvas.width; x += 5) {
                const y = waterLevel + Math.sin(x / 30 + Date.now() / 500) * 3;
                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Density label
            ctx.fillStyle = 'rgba(255,255,255,0.8)';
            ctx.font = 'bold 14px Segoe UI';
            ctx.textAlign = 'left';
            ctx.fillText(`Fl√ºssigkeit: œÅ = ${liquidDensity.toFixed(2)} g/cm¬≥`, 15, waterLevel + 25);

            // Water line marker
            ctx.strokeStyle = '#4fc3f7';
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(0, waterLevel);
            ctx.lineTo(canvas.width, waterLevel);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBackground();

            objects.forEach(obj => {
                obj.update();
                obj.draw();
            });

            requestAnimationFrame(animate);
        }

        liquidDensitySlider.addEventListener('input', (e) => {
            liquidDensity = parseFloat(e.target.value);
            densityDisplay.textContent = `œÅ = ${liquidDensity.toFixed(2)} g/cm¬≥`;
        });

        // Start
        animate();
    </script>
</body>
</html>
