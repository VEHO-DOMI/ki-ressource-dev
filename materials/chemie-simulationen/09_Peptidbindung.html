<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peptidbindung - Proteinbildung</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }
        .container { max-width: 100%; margin: 0 auto; padding: 0 10px; }
        h1 { text-align: center; margin-bottom: 10px; font-size: 1.8em; color: #4fc3f7; }
        .subtitle { text-align: center; color: #90a4ae; margin-bottom: 20px; }
        .simulation-area {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        canvas {
            display: block;
            margin: 0 auto;
            background: radial-gradient(ellipse at center, #1b263b 0%, #0d1b2a 100%);
            border-radius: 10px;
            border: 2px solid #4fc3f7;
            max-width: 100%;
            height: auto;
        }
        .reaction-display {
            text-align: center;
            font-size: 1.2em;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            margin: 15px 0;
        }
        .amino { color: #e74c3c; }
        .carboxy { color: #3498db; }
        .peptide { color: #2ecc71; }
        .water { color: #9b59b6; }
        .step-bar {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        .step-item {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        .step-item.active {
            background: linear-gradient(135deg, #4fc3f7, #2ecc71);
            color: #1a1a2e;
            font-weight: bold;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        .control-btn {
            padding: 12px 25px;
            font-size: 1em;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        .control-btn:hover { transform: translateY(-2px); }
        .control-btn.play { background: linear-gradient(135deg, #2ecc71, #27ae60); color: white; }
        .control-btn.reset { background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; }
        .amino-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .amino-btn {
            padding: 8px 15px;
            border: 2px solid #4fc3f7;
            border-radius: 15px;
            background: transparent;
            color: #4fc3f7;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.2s;
        }
        .amino-btn:hover, .amino-btn.selected {
            background: #4fc3f7;
            color: #1a1a2e;
        }
        .info-box {
            background: rgba(79, 195, 247, 0.1);
            border-left: 4px solid #4fc3f7;
            padding: 15px 20px;
            border-radius: 0 10px 10px 0;
            margin-top: 20px;
        }
        .info-box h3 { color: #4fc3f7; margin-bottom: 10px; }
        .info-box p { line-height: 1.6; color: #b0bec5; }
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85em; }
        .legend-dot { width: 16px; height: 16px; border-radius: 50%; }
        .peptide-chain {
            text-align: center;
            padding: 15px;
            background: rgba(46, 204, 113, 0.1);
            border: 1px solid #2ecc71;
            border-radius: 10px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
        }
        .peptide-chain h4 { color: #2ecc71; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß¨ Peptidbindung</h1>
        <p class="subtitle">7. Klasse Chemie ‚Äì Wie Proteine entstehen</p>

        <div class="simulation-area">
            <div class="amino-selector">
                <span style="color: #90a4ae; margin-right: 10px;">Aminos√§uren w√§hlen:</span>
                <button class="amino-btn selected" data-amino="Gly" onclick="selectAmino(this, 'Gly')">Glycin (Gly)</button>
                <button class="amino-btn" data-amino="Ala" onclick="selectAmino(this, 'Ala')">Alanin (Ala)</button>
                <button class="amino-btn" data-amino="Ser" onclick="selectAmino(this, 'Ser')">Serin (Ser)</button>
                <button class="amino-btn" data-amino="Val" onclick="selectAmino(this, 'Val')">Valin (Val)</button>
            </div>

            <canvas id="peptideCanvas" width="850" height="380"></canvas>

            <div class="step-bar">
                <div class="step-item active" id="step1">1. Ann√§herung</div>
                <div class="step-item" id="step2">2. Reaktion</div>
                <div class="step-item" id="step3">3. Kondensation</div>
                <div class="step-item" id="step4">4. Dipeptid</div>
            </div>

            <div class="reaction-display">
                <span class="amino">H‚ÇÇN-CHR-COOH</span> +
                <span class="carboxy">H‚ÇÇN-CHR'-COOH</span> ‚Üí
                <span class="peptide">H‚ÇÇN-CHR-<strong>CO-NH</strong>-CHR'-COOH</span> +
                <span class="water">H‚ÇÇO</span>
            </div>

            <div class="controls">
                <button class="control-btn play" onclick="playAnimation()" id="playBtn">‚ñ∂ Animation starten</button>
                <button class="control-btn reset" onclick="resetAnimation()">‚Ü∫ Zur√ºcksetzen</button>
            </div>

            <div class="peptide-chain">
                <h4>Gebildete Peptidkette:</h4>
                <div id="chainDisplay">-</div>
            </div>

            <div class="legend">
                <div class="legend-item"><div class="legend-dot" style="background: #2c3e50;"></div> Kohlenstoff (C)</div>
                <div class="legend-item"><div class="legend-dot" style="background: #e74c3c;"></div> Sauerstoff (O)</div>
                <div class="legend-item"><div class="legend-dot" style="background: #3498db;"></div> Stickstoff (N)</div>
                <div class="legend-item"><div class="legend-dot" style="background: #ecf0f1;"></div> Wasserstoff (H)</div>
                <div class="legend-item"><div class="legend-dot" style="background: #9b59b6;"></div> Rest (R)</div>
            </div>
        </div>

        <div class="info-box">
            <h3>üìö Die Peptidbindung</h3>
            <p>Bei der Peptidbindung reagiert die <strong>Carboxylgruppe (-COOH)</strong> einer Aminos√§ure mit der
            <strong>Aminogruppe (-NH‚ÇÇ)</strong> einer anderen Aminos√§ure. Dabei wird <strong>Wasser (H‚ÇÇO)</strong>
            abgespalten (Kondensationsreaktion). Die entstehende <strong>CO-NH-Bindung</strong> ist die Peptidbindung.
            Sie ist planar und hat partiellen Doppelbindungscharakter.</p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('peptideCanvas');
        const ctx = canvas.getContext('2d');

        const aminoAcids = {
            'Gly': { name: 'Glycin', rest: 'H', color: '#95a5a6' },
            'Ala': { name: 'Alanin', rest: 'CH‚ÇÉ', color: '#9b59b6' },
            'Ser': { name: 'Serin', rest: 'CH‚ÇÇOH', color: '#1abc9c' },
            'Val': { name: 'Valin', rest: 'C‚ÇÉH‚Çá', color: '#e67e22' }
        };

        let selectedAmino = 'Gly';
        let currentStep = 1;
        let isAnimating = false;
        let animProgress = 0;
        let peptideChain = [];

        function selectAmino(btn, amino) {
            document.querySelectorAll('.amino-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            selectedAmino = amino;
        }

        function drawAtom(x, y, radius, color, label = '', labelColor = '#fff') {
            const gradient = ctx.createRadialGradient(x - radius/3, y - radius/3, 0, x, y, radius);
            gradient.addColorStop(0, lightenColor(color, 30));
            gradient.addColorStop(1, color);

            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fillStyle = gradient;
            ctx.fill();

            if (label) {
                ctx.fillStyle = labelColor;
                ctx.font = `bold ${Math.max(10, radius * 0.7)}px Segoe UI`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(label, x, y);
            }
        }

        function drawBond(x1, y1, x2, y2, double = false) {
            ctx.strokeStyle = '#4fc3f7';
            ctx.lineWidth = 3;

            if (double) {
                const dx = x2 - x1, dy = y2 - y1;
                const len = Math.sqrt(dx*dx + dy*dy);
                const nx = -dy / len * 3, ny = dx / len * 3;

                ctx.beginPath();
                ctx.moveTo(x1 + nx, y1 + ny);
                ctx.lineTo(x2 + nx, y2 + ny);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(x1 - nx, y1 - ny);
                ctx.lineTo(x2 - nx, y2 - ny);
                ctx.stroke();
            } else {
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.stroke();
            }
        }

        function lightenColor(color, percent) {
            const num = parseInt(color.replace('#', ''), 16);
            const R = Math.min(255, (num >> 16) + Math.round(2.55 * percent));
            const G = Math.min(255, ((num >> 8) & 0xFF) + Math.round(2.55 * percent));
            const B = Math.min(255, (num & 0xFF) + Math.round(2.55 * percent));
            return `rgb(${R}, ${G}, ${B})`;
        }

        function drawAminoAcid(cx, cy, aminoType, showLabels = true, highlightCarboxyl = false, highlightAmino = false) {
            const amino = aminoAcids[aminoType];

            // Alpha carbon
            drawAtom(cx, cy, 18, '#2c3e50', 'CŒ±');

            // Amino group (left)
            drawBond(cx - 18, cy, cx - 50, cy);
            drawAtom(cx - 50, cy, 16, highlightAmino ? '#27ae60' : '#3498db', 'N');
            drawBond(cx - 50, cy, cx - 75, cy - 20);
            drawBond(cx - 50, cy, cx - 75, cy + 20);
            drawAtom(cx - 75, cy - 20, 10, '#ecf0f1', 'H', '#333');
            drawAtom(cx - 75, cy + 20, 10, '#ecf0f1', 'H', '#333');

            // Carboxyl group (right)
            drawBond(cx + 18, cy, cx + 50, cy);
            drawAtom(cx + 50, cy, 16, '#2c3e50', 'C');
            drawBond(cx + 50, cy, cx + 80, cy - 25, true);
            drawAtom(cx + 80, cy - 25, 14, highlightCarboxyl ? '#27ae60' : '#e74c3c', 'O');
            drawBond(cx + 50, cy, cx + 80, cy + 25);
            drawAtom(cx + 80, cy + 25, 14, '#e74c3c', 'O');
            drawBond(cx + 80, cy + 25, cx + 105, cy + 25);
            drawAtom(cx + 105, cy + 25, 10, '#ecf0f1', 'H', '#333');

            // H on alpha carbon
            drawBond(cx, cy - 18, cx, cy - 45);
            drawAtom(cx, cy - 45, 10, '#ecf0f1', 'H', '#333');

            // R group
            drawBond(cx, cy + 18, cx, cy + 50);
            drawAtom(cx, cy + 50, 20, amino.color, 'R');

            if (showLabels) {
                ctx.fillStyle = '#90a4ae';
                ctx.font = '12px Segoe UI';
                ctx.textAlign = 'center';
                ctx.fillText(amino.name, cx, cy + 90);
                ctx.fillText(`R = ${amino.rest}`, cx, cy + 105);
            }
        }

        function drawStep1() {
            ctx.fillStyle = '#4fc3f7';
            ctx.font = '14px Segoe UI';
            ctx.textAlign = 'center';
            ctx.fillText('Aminos√§ure 1', 220, 50);
            ctx.fillText('Aminos√§ure 2', 630, 50);

            drawAminoAcid(220, 190, 'Gly', true, true, false);
            drawAminoAcid(630, 190, selectedAmino, true, false, true);

            // Arrow
            ctx.fillStyle = 'rgba(79, 195, 247, 0.3)';
            ctx.beginPath();
            ctx.moveTo(380, 190);
            ctx.lineTo(420, 170);
            ctx.lineTo(420, 210);
            ctx.closePath();
            ctx.fill();
        }

        function drawStep2() {
            const offset = animProgress * 80;

            drawAminoAcid(220 + offset, 190, 'Gly', false, true, false);
            drawAminoAcid(630 - offset, 190, selectedAmino, false, false, true);

            // Highlight reactive groups
            ctx.strokeStyle = '#2ecc71';
            ctx.lineWidth = 3;
            ctx.setLineDash([5, 5]);

            // Circle around COOH
            ctx.beginPath();
            ctx.arc(300 + offset, 190, 50, 0, Math.PI * 2);
            ctx.stroke();

            // Circle around NH2
            ctx.beginPath();
            ctx.arc(560 - offset, 190, 50, 0, Math.PI * 2);
            ctx.stroke();

            ctx.setLineDash([]);

            ctx.fillStyle = '#2ecc71';
            ctx.font = 'bold 14px Segoe UI';
            ctx.fillText('Reaktive Gruppen n√§hern sich', 425, 310);
        }

        function drawStep3() {
            const cx = 425, cy = 190;

            // Water molecule being released
            const waterX = cx + animProgress * 100;
            const waterY = cy - 80 - animProgress * 30;

            drawAtom(waterX, waterY, 14, '#9b59b6', 'O');
            drawAtom(waterX - 20, waterY + 15, 8, '#ecf0f1', 'H', '#333');
            drawAtom(waterX + 20, waterY + 15, 8, '#ecf0f1', 'H', '#333');

            ctx.fillStyle = '#9b59b6';
            ctx.font = '14px Segoe UI';
            ctx.textAlign = 'center';
            ctx.fillText('H‚ÇÇO', waterX, waterY + 40);

            // Peptide bond forming
            ctx.strokeStyle = '#2ecc71';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(cx - 20, cy);
            ctx.lineTo(cx + 20, cy);
            ctx.stroke();

            ctx.fillStyle = '#2ecc71';
            ctx.font = 'bold 16px Segoe UI';
            ctx.fillText('Peptidbindung bildet sich!', cx, cy + 100);
            ctx.font = '12px Segoe UI';
            ctx.fillStyle = '#90a4ae';
            ctx.fillText('Wasser wird abgespalten (Kondensation)', cx, cy + 120);
        }

        function drawStep4() {
            const cx = 425, cy = 190;

            // Dipeptide
            // First amino acid (Gly)
            drawAtom(cx - 120, cy, 16, '#2c3e50', 'CŒ±');
            drawBond(cx - 138, cy, cx - 170, cy);
            drawAtom(cx - 170, cy, 14, '#3498db', 'N');
            drawBond(cx - 170, cy, cx - 195, cy - 15);
            drawBond(cx - 170, cy, cx - 195, cy + 15);
            drawAtom(cx - 195, cy - 15, 8, '#ecf0f1', 'H', '#333');
            drawAtom(cx - 195, cy + 15, 8, '#ecf0f1', 'H', '#333');

            // R group 1
            drawBond(cx - 120, cy + 16, cx - 120, cy + 45);
            drawAtom(cx - 120, cy + 45, 16, '#95a5a6', 'R‚ÇÅ');

            // Peptide bond C=O
            drawBond(cx - 102, cy, cx - 60, cy);
            drawAtom(cx - 60, cy, 14, '#2c3e50', 'C');
            drawBond(cx - 60, cy, cx - 40, cy - 30, true);
            drawAtom(cx - 40, cy - 30, 12, '#e74c3c', 'O');

            // Peptide bond N-H (highlighted)
            ctx.strokeStyle = '#2ecc71';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(cx - 46, cy);
            ctx.lineTo(cx + 10, cy);
            ctx.stroke();

            drawAtom(cx + 10, cy, 14, '#3498db', 'N');
            drawBond(cx + 10, cy, cx + 30, cy - 30);
            drawAtom(cx + 30, cy - 30, 8, '#ecf0f1', 'H', '#333');

            // Second amino acid
            drawBond(cx + 24, cy, cx + 60, cy);
            drawAtom(cx + 60, cy, 16, '#2c3e50', 'CŒ±');

            // R group 2
            drawBond(cx + 60, cy + 16, cx + 60, cy + 45);
            const amino = aminoAcids[selectedAmino];
            drawAtom(cx + 60, cy + 45, 16, amino.color, 'R‚ÇÇ');

            // Carboxyl group
            drawBond(cx + 78, cy, cx + 110, cy);
            drawAtom(cx + 110, cy, 14, '#2c3e50', 'C');
            drawBond(cx + 110, cy, cx + 135, cy - 25, true);
            drawAtom(cx + 135, cy - 25, 12, '#e74c3c', 'O');
            drawBond(cx + 110, cy, cx + 135, cy + 25);
            drawAtom(cx + 135, cy + 25, 12, '#e74c3c', 'O');
            drawBond(cx + 135, cy + 25, cx + 155, cy + 25);
            drawAtom(cx + 155, cy + 25, 8, '#ecf0f1', 'H', '#333');

            // Labels
            ctx.fillStyle = '#2ecc71';
            ctx.font = 'bold 14px Segoe UI';
            ctx.textAlign = 'center';
            ctx.fillText('PEPTIDBINDUNG', cx - 20, cy + 80);

            ctx.fillStyle = '#4fc3f7';
            ctx.font = '16px Segoe UI';
            ctx.fillText('Dipeptid: Gly-' + selectedAmino, cx, cy + 110);

            // Box around peptide bond
            ctx.strokeStyle = '#2ecc71';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 3]);
            ctx.strokeRect(cx - 75, cy - 50, 100, 70);
            ctx.setLineDash([]);

            // Update chain display
            if (peptideChain.length === 0 || peptideChain[peptideChain.length-1] !== selectedAmino) {
                peptideChain = ['Gly', selectedAmino];
            }
            document.getElementById('chainDisplay').innerHTML =
                `H‚ÇÇN-<strong>${peptideChain.join('-')}</strong>-COOH`;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            switch(currentStep) {
                case 1: drawStep1(); break;
                case 2: drawStep2(); break;
                case 3: drawStep3(); break;
                case 4: drawStep4(); break;
            }
        }

        function updateUI() {
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`step${i}`).classList.toggle('active', i === currentStep);
            }
        }

        function playAnimation() {
            if (isAnimating) return;
            isAnimating = true;
            document.getElementById('playBtn').disabled = true;

            const animate = () => {
                if (currentStep < 4) {
                    animProgress += 0.02;
                    if (animProgress >= 1) {
                        animProgress = 0;
                        currentStep++;
                        updateUI();
                    }
                    draw();
                    if (currentStep < 4 || animProgress < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        isAnimating = false;
                        document.getElementById('playBtn').disabled = false;
                    }
                } else {
                    draw();
                    isAnimating = false;
                    document.getElementById('playBtn').disabled = false;
                }
            };

            animate();
        }

        function resetAnimation() {
            currentStep = 1;
            animProgress = 0;
            isAnimating = false;
            peptideChain = [];
            document.getElementById('chainDisplay').innerHTML = '-';
            document.getElementById('playBtn').disabled = false;
            updateUI();
            draw();
        }

        // Initial draw
        draw();
    </script>
</body>
</html>
